# JSON Visual Diff Playground - 新功能指南

## 🎉 新功能概览

JSON Visual Diff Playground 已经升级，现在提供更强大的编辑体验和更好的用户界面！

## ✨ 主要新功能

### 1. Monaco Editor 集成

我们用 VS Code 同款的 Monaco Editor 替换了原有的简单文本框，现在你可以享受：

- **语法高亮**：JSON 代码自动着色，更易阅读
- **实时错误检测**：输入时立即发现 JSON 语法错误
- **智能补全**：按 `Ctrl+Space`（Mac: `Cmd+Space`）获取补全建议
- **代码折叠**：点击行号旁的折叠图标隐藏/展开嵌套结构
- **自动格式化**：粘贴 JSON 时自动格式化
- **括号匹配**：自动高亮匹配的括号
- **撤销/重做**：`Ctrl+Z` / `Ctrl+Shift+Z` 支持多步撤销

### 2. 全新的垂直布局

- **左侧面板**：两个编辑器垂直排列（上下布局）
  - 上方：原始 JSON (Old)
  - 下方：新 JSON (New)
- **右侧面板**：差异结果显示
- **50/50 分屏**：编辑器和结果各占一半屏幕宽度

这种布局让你可以：
- 更舒适地查看较长的 JSON 文档
- 同时看到两个 JSON 和差异结果
- 充分利用宽屏显示器

### 3. 编辑器设置

点击工具栏右侧的 **⚙️ 设置** 按钮，可以自定义：

#### 主题选择
- **浅色主题**：适合明亮环境
- **深色主题**：适合暗光环境，保护眼睛

#### 字体大小
- 使用滑块调整字体大小（10-24px）
- 适应不同的屏幕尺寸和视力需求

#### 小地图
- 显示/隐藏代码小地图
- 小地图提供代码全局视图，方便快速导航

**💾 自动保存**：你的设置会自动保存到浏览器本地存储，下次打开时自动恢复！

### 4. 完全响应式设计

无论你使用什么设备，Playground 都能完美适配：

- **桌面端**（> 1024px）：左右分栏布局
- **平板端**（768px - 1024px）：垂直堆叠布局
- **手机端**（< 768px）：完全垂直布局，触摸友好
- **最小支持**：320px 宽度的小屏设备

## 🚀 快速开始

### 使用示例

1. 点击 **选择示例** 下拉菜单
2. 选择一个预设示例（如"基础对象比较"）
3. 点击 **比较差异** 按钮
4. 在右侧查看差异结果

### 导入 JSON 文件

1. 点击 **📁 导入左侧** 或 **📁 导入右侧** 按钮
2. 选择你的 JSON 文件
3. 文件内容会自动加载到编辑器

### 导出结果

- **💾 导出 JSON**：将差异结果保存为 JSON 文件
- **💾 导出 HTML**：将差异结果保存为独立的 HTML 文件，可以在浏览器中直接打开

## 💡 使用技巧

### 编辑器快捷键

- `Ctrl+Space` (Mac: `Cmd+Space`)：触发自动补全
- `Ctrl+Z` / `Ctrl+Shift+Z`：撤销/重做
- `Ctrl+F` (Mac: `Cmd+F`)：查找
- `Ctrl+H` (Mac: `Cmd+H`)：查找并替换
- `Alt+Up/Down`：移动当前行
- `Ctrl+/` (Mac: `Cmd+/`)：切换注释
- `Ctrl+D` (Mac: `Cmd+D`)：选择下一个匹配项

### 代码折叠

- 点击行号左侧的 `▼` 图标折叠代码块
- 点击 `▶` 图标展开代码块
- 适合处理大型嵌套 JSON 结构

### 格式化 JSON

1. 粘贴未格式化的 JSON
2. Monaco Editor 会自动格式化
3. 或者手动按 `Shift+Alt+F` (Mac: `Shift+Option+F`)

### 错误提示

- 红色波浪线表示语法错误
- 鼠标悬停查看错误详情
- 编辑器会实时验证 JSON 语法

## 🎨 主题切换

### 浅色主题
适合：
- 明亮的办公环境
- 白天使用
- 喜欢高对比度的用户

### 深色主题
适合：
- 暗光环境
- 夜间使用
- 减少眼睛疲劳
- 节省 OLED 屏幕电量

## 📱 移动端使用

在手机或平板上使用时：

1. **垂直滚动**：所有面板垂直堆叠，方便滚动查看
2. **触摸友好**：所有按钮都足够大，易于点击
3. **自适应字体**：字体大小自动调整以适应小屏幕
4. **手势支持**：支持触摸滚动、缩放等手势

## 🔧 高级功能

### 处理大型 JSON

对于大型 JSON 文件（> 10KB）：

1. 使用代码折叠隐藏不需要的部分
2. 使用小地图快速导航
3. 使用查找功能（`Ctrl+F`）定位特定内容
4. 考虑关闭小地图以提升性能

### 比较 API 响应

1. 从浏览器开发者工具复制 API 响应
2. 粘贴到编辑器（自动格式化）
3. 比较不同版本的 API 响应
4. 导出差异报告

### 配置文件对比

1. 导入配置文件（如 package.json, tsconfig.json）
2. 比较不同环境的配置差异
3. 快速发现配置变更

## 🐛 故障排除

### 编辑器加载缓慢

- Monaco Editor 首次加载需要下载资源
- 后续访问会使用浏览器缓存，速度更快
- 确保网络连接正常

### 设置未保存

- 检查浏览器是否允许本地存储
- 清除浏览器缓存可能会丢失设置
- 隐私模式下设置不会持久化

### 移动端显示问题

- 尝试横屏使用以获得更多空间
- 调整字体大小以适应屏幕
- 使用代码折叠减少滚动

## 📊 性能指标

- **编辑器初始化**：< 2 秒
- **100KB JSON 比较**：< 1 秒
- **输入响应**：即时（无卡顿）
- **构建大小**：~187KB（gzip: ~59KB）

## 🔄 向后兼容

所有原有功能都得到保留：

- ✅ 所有示例场景
- ✅ JSON 导入/导出
- ✅ HTML 导出
- ✅ Diff 算法
- ✅ DOM 渲染器
- ✅ 浏览器兼容性

## 🎯 最佳实践

1. **使用示例学习**：先从预设示例开始熟悉功能
2. **自定义设置**：根据个人喜好调整主题和字体
3. **善用快捷键**：提高编辑效率
4. **导出结果**：保存重要的差异分析
5. **移动端访问**：随时随地进行 JSON 比较

## 🚀 未来计划

我们正在考虑添加：

- 更多主题选项
- 自定义颜色方案
- 键盘快捷键自定义
- 更多导出格式（Markdown, PDF）
- 历史记录功能
- 协作功能

## 💬 反馈

如果你有任何建议或发现问题，欢迎：

- 提交 Issue
- 发起 Pull Request
- 联系开发团队

---

享受全新的 JSON Visual Diff Playground！🎉
